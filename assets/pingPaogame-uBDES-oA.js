import{L as w,o as B,r as g,q as _,t as U,_ as k,v as F,w as $,x as m,M as C}from"./index-dkMWr8iF.js";const P=w({name:"pingPaogame",setup(){const a=B(),n=g(null),e=g(null),c=()=>{n.value?n.value.Quit().then(()=>{a.push({path:"/pingpaoFirst"})}).catch(o=>{a.push({path:"/pingpaoFirst"})}):a.push({path:"/pingpaoFirst"})};return _(()=>{const o=document.querySelector("#unity-canvas"),r=document.querySelector("#unity-loading-bar"),s=document.querySelector("#unity-progress-bar-full");if(!o||!r||!s||!e.value)return;r.style.display="block";function b(i,p){var y;const t=document.createElement("div");t.innerHTML=i,p==="error"?(t.style.background="red",t.style.padding="10px"):p==="warning"&&(t.style.background="yellow",t.style.padding="10px",setTimeout(()=>{var v;(v=e.value)!=null&&v.contains(t)&&e.value.removeChild(t),u()},5e3)),(y=e.value)==null||y.appendChild(t),u()}function u(){e.value&&(e.value.style.display=e.value.children.length?"block":"none")}const d="Build",f=`${d}/pingPaogame.loader.js`,h={dataUrl:`${d}/pingPaogame.data.unityweb`,frameworkUrl:`${d}/pingPaogame.framework.js.unityweb`,codeUrl:`${d}/pingPaogame.wasm.unityweb`,companyName:"DefaultCompany",productName:"Introduction",productVersion:"1.0",showBanner:b};r.style.display="block";const l=document.createElement("script");l.src=f,l.onload=()=>{createUnityInstance(o,h,i=>{s&&(s.style.width=`${100*i}%`)}).then(i=>{n.value=i,r.style.display="none"}).catch(i=>{alert("Failed to create Unity instance.")})},l.onerror=()=>{console.error("Failed to load the Unity loader script."),alert("Failed to load the Unity loader script.")},document.body.appendChild(l)}),U(()=>{n.value&&n.value.Quit().catch(o=>{console.error("Failed to quit Unity instance:",o)})}),{endTest:c,warningBanner:e}}}),q={id:"unity-container"},x=C('<canvas id="unity-canvas" width="1440" height="900" tabindex="-1" data-v-73d7bb03></canvas><div id="unity-loading-bar" data-v-73d7bb03><div id="unity-logo" data-v-73d7bb03></div><div id="unity-progress-bar-empty" data-v-73d7bb03><div id="unity-progress-bar-full" data-v-73d7bb03></div></div></div>',2),S={id:"unity-warning",ref:"warningBanner"};function T(a,n,e,c,o,r){return F(),$("div",q,[x,m("div",S,null,512),m("button",{class:"end-test-button",onClick:n[0]||(n[0]=(...s)=>a.endTest&&a.endTest(...s))},"结束测试")])}const E=k(P,[["render",T],["__scopeId","data-v-73d7bb03"]]);export{E as default};
